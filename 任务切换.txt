修改任务切换：先切到FIQ模式，修改spsr，再用ldmfd SP! {PC}^的形式切换，（因为系统模式没有SPSR寄存器，所以想切到USR模式不能直接从系统模式进行）
添加软中断（系统调用）功能


-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
2017-10-15  17:27
软件中断实现中断号、参数及返回值的传递
head.s  HandlerSWI、syscall

syscall执行  swi指令前栈图下所示

|--------------------|
|         	     |<-----------SP + 8
|     参数地址       |
|--------------------|
|         	     |<-----------SP + 4
|     参数个数       |
|--------------------|
|         	     |<-----------SP 
|   返回值预留地址   |
|--------------------|

HandlerSWI执行完bl enable_irq 之前的 STFMD SP! {R0} 指令之后栈空间如下所示

|--------------------|
|         	     |<-----------SP + 72
|     参数地址       |
|--------------------|
|         	     |<-----------SP + 68
|     参数个数       |
|--------------------|
|         	     |<-----------SP + 64    返回值地址
|     存放返回值     |
|--------------------|
|         	     |<-----------SP + 60
|       PC           |
|--------------------|
|         	     |<-----------SP + 56
|       SPSR         |
|--------------------|
|         	     |<-----------SP + 52
|       LR           |
|--------------------|
|         	     |<-----------SP + 48
|       R12          |
|--------------------|
|         	     |<-----------SP + 44
|       R11          |
|--------------------|
|         	     |<-----------SP + 40
|       R10          |
|--------------------|
|         	     |<-----------SP + 36
|       R9           |
|--------------------|
|         	     |<-----------SP + 32
|       R8           |
|--------------------|
|         	     |<-----------SP + 28
|       R7           |
|--------------------|
|         	     |<-----------SP + 24
|       R6           |
|--------------------|
|         	     |<-----------SP + 20
|       R5           |
|--------------------|
|         	     |<-----------SP + 16
|       R4           |
|--------------------|
|         	     |<-----------SP + 12
|       R3           |
|--------------------|
|         	     |<-----------SP + 8
|       R2           |
|--------------------|
|         	     |<-----------SP + 4
|       R1           |
|--------------------|
|         	     |<-----------SP
|       R0           |
|--------------------|

HandlerSWI执行完 LDMFD	SP! {PC}^  后（syscall swi  的后一条指令）的栈如下图

|--------------------|
|         	     |<-----------SP + 8
|     原参数地址     |
|--------------------|
|         	     |<-----------SP + 4
|     原参数个数     |
|--------------------|
|         	     |<-----------SP    返回值地址
|     返回值 	     |
|--------------------|

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------








